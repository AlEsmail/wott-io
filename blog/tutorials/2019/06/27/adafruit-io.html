<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Using WoTT credentials to manage access to Adafruit IO feeds</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    	<link rel="stylesheet" type="text/css" href="https://wott.io/assets/style/style.css" />
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta name="description" content="WoTT is a free, automated, open-source public key infrastructure for connected hardware" />
    <link rel="shortcut icon" href="https://wott.io/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="https://wott.io/blog/tutorials/2019/06/27/adafruit-io" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     
    <meta property="og:site_name" content="Web of Trusted Things" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Using WoTT credentials to manage access to Adafruit IO feeds" />
    <meta property="og:description" content="Using Adafruit IO with WoTT Credentials Introduction Adafruit IO is a free cloud service interested in making IoT accessible to everyone through presenting data in a useful and user-friendly way. Services that they provide include linking your IoT devices to Twitter and weather services. You can also use Adafruit IO" />
    <meta property="og:url" content="https://wott.io/blog/tutorials/2019/06/27/adafruit-io" />
    <meta property="og:image" content="https://wott.io/Image_5.png" />
    <meta property="article:publisher" content="https://www.facebook.com/wott" />
    <meta property="article:author" content="https://www.facebook.com/wott" />
    <meta property="article:published_time" content="2019-06-27T17:00:00+00:00" />
    <meta property="article:modified_time" content="2019-06-27T17:00:00+00:00" />
    <meta property="article:tag" content="Open Source" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Using WoTT credentials to manage access to Adafruit IO feeds" />
    <meta name="twitter:description" content="Using Adafruit IO with WoTT Credentials Introduction Adafruit IO is a free cloud service interested in making IoT accessible to everyone through presenting data in a useful and user-friendly way. Services that they provide include linking your IoT devices to Twitter and weather services. You can also use Adafruit IO" />
    <meta name="twitter:url" content="https://wott.io/" />
    <meta name="twitter:image" content="https://wott.io/Image_5.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Web of Trusted Things" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Open Source" />
    <meta name="twitter:site" content="@wott" />
    <meta name="twitter:creator" content="@wott" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Web of Trusted Things",
        "logo": "https://wott.io/assets/images/blog-icon.png"
    },
    "url": "https://wott.io/blog/tutorials/2019/06/27/adafruit-io",
    "image": {
        "@type": "ImageObject",
        "url": "https://wott.io/Image_5.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://wott.io/blog/tutorials/2019/06/27/adafruit-io"
    },
    "description": "Using Adafruit IO with WoTT Credentials Introduction Adafruit IO is a free cloud service interested in making IoT accessible to everyone through presenting data in a useful and user-friendly way. Services that they provide include linking your IoT devices to Twitter and weather services. You can also use Adafruit IO"
}
    </script>

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Using WoTT credentials to manage access to Adafruit IO feeds" href="/feed.xml" />

</head>
<body>
<header class="b_header"><div class="head_nav">

<a class="logo" href="https://wott.io/" title="Home page"></a>

<ul class="nav_m">
<li><a href="https://wott.io/product" title="">product</a></li>
<li><a href="https://wott.io/about" title="">about us</a></li>
<li><a href="https://wott.io/pricing" title="">pricing</a></li>
<li><a href="https://wott.io/documentation" title="">documentation</a></li>
<li><a href="https://wott.io/blog" title="">blog</a></li>
</ul>

<div class="ls_button">
<a class="log_in" href="https://dash.wott.io/accounts/login">log in</a>
<a class="sign_up" href="https://dash.wott.io/accounts/register/">sign up</a>
</div>

</div></header>
    <div class="b_content post-template ">
        <div class="blog_page">
<div class="blog_info">
<span class="t_i1">Using WoTT credentials to manage access to Adafruit IO feeds</span>
<span class="t_m2">By Fiona McAllister on June 27, 2019 | 0 Comments</span>
</div>
<div class="blog_image" style="background-image:url(https://wott.io/assets/images/blogcover/full/Image_5.png);"></div><div class="blog_image_bg"></div>
<div class="blog_tags"><a href="">Open Source</a></div>

<div class="social_network">
<div class="title_b">share</div>
<ul>

<li style="background-image:url(https://wott.io/assets/style/img/sn/facebook.png);"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://wott.io/blog/tutorials/2019/06/27/adafruit-io" title=""></a></li>
<li style="background-image:url(https://wott.io/assets/style/img/sn/twitter.png);"><a target="_blank" href="https://twitter.com/share?url=https://wott.io/blog/tutorials/2019/06/27/adafruit-io&text=Using WoTT credentials to manage access to Adafruit IO feeds" title=""></a></li>
<li style="background-image:url(https://wott.io/assets/style/img/sn/send.png);"><a target="_blank" href="mailto:?subject=Using WoTT credentials to manage access to Adafruit IO feeds&body=/blog/tutorials/2019/06/27/adafruit-io" title=""></a></li>
<li style="background-image:url(https://wott.io/assets/style/img/sn/pinterest.png);"><a target="_blank" href="http://pinterest.com/pin/create/button/?url=https://wott.io/blog/tutorials/2019/06/27/adafruit-io&media=https://wott.io/assets/images/blogcover/full/Image_5.png&description= Using Adafruit IO with WoTT Credentials Introduction Adafruit IO is a free cloud service interested in making IoT accessible to everyone through presenting data in a useful and user-friendly way. Services that they provide include linking your IoT devices to Twitter and weather services. You can also use Adafruit IO to monitor... " title=""></a></li>
<li style="background-image:url(https://wott.io/assets/style/img/sn/linkedin.png);"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://wott.io/blog/tutorials/2019/06/27/adafruit-io&title=Using WoTT credentials to manage access to Adafruit IO feeds" title=""></a></li>
</ul>
<div class="arrow_b"></div>
</div>

<div class="blog_content content_info_block">
<h1 id="using-adafruit-io-with-wott-credentials">Using Adafruit IO with WoTT Credentials</h1>

<h2 id="introduction">Introduction</h2>

<p><a href="https://io.adafruit.com">Adafruit IO</a> is a free cloud service interested in making IoT accessible to everyone through presenting data in a useful and user-friendly way. Services that they provide include linking your IoT devices to Twitter and weather services. You can also use Adafruit IO to monitor and control temperature sensitive devices; or to change the colours of an RGB lightbulb through their user-friendly dashboard. These are just a few examples of how you can utilise Adafruit’s IO.</p>

<p>We’re interested in Adafruit IO as it provides a means for us to communicate with our IoT devices via messages through either an MQTT or HTTP service. WWe can therefore interact with Adafruit’s services and use our WoTT provided credentials to secure it.</p>

<p>For this example you will need a device with the WoTT agent installed and a browser. You will also need an Adafruit IO account as well as a WoTT dash account. We will show you to set these up later in the guide if you haven’t done so already. You should also have <code class="highlighter-rouge">curl</code> installed.</p>

<h2 id="installing-and-setting-up-to-use-adafruit-io">Installing and setting up to use Adafruit IO</h2>

<p>The first thing you will need to do, is to <a href="https://accounts.adafruit.com/users/sign_up">sign up</a> for Adafruit IO so you can access their <a href="https://io.adafruit.com/">dashboard</a>. Familiarise yourself with their <a href="https://learn.adafruit.com/series/adafruit-io-basics">basic guides</a>. For this example, we will be creating a ‘Feed.’ First however, you will need to have the Adafruit IO client downloaded on your system. We will be using their Python client.</p>

<p>To install:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ apt update &amp;&amp; apt install -y python3 python3-pip curl
$ pip3 install adafruit-io
</code></pre></div></div>
<p>Now we’re all set up, we can create a feed to later call via MQTT.</p>

<h2 id="creating-a-feed-for-mqtt-messaging">Creating a Feed for MQTT messaging</h2>

<p>Login to the Adafruit IO dashboard. Navigate to the ‘Feeds’ page on the left-hand side menu. Hover over actions and select ‘Create a New Feed.’ The feed acts as a channel or datastream through which your device connects to Adafruit IO. We are going to create a feed that is called via MQTT. In other words, the feed becomes the topic from which messages are published/subscribed to.</p>

<p><img alt="create feed" src="https://wott.io/assets/blog/adafruit-add-21106ff597b5fe9bca13995f8e116602c02e5371f9d81dc073ab764ee70a132b.png" integrity="sha256-IRBv9Ze1/pvKE5lfjhFmAsAuU3H52B3Ac6t2TucKEys=" crossorigin="anonymous" srcset="https://wott.io/assets/25fd86-a3209c0ccb9645b76e9b1642764df56d354886697a3d339d36e76d7bdec2f16c.png 2x, https://wott.io/assets/cd12eb-aca71a2e7da74218a6a3d0d45e0b372ffb9a0968e8f1e6a960726dc27363a0f4.png 1x" /></p>

<p>The feed name refers to the type of data you are observing- for example temperature or humidity. To keep things simple, we are just going to observe data and name the feed ‘data feed.’ The description is supposed to provide some more in-depth information about the feed. When using sensor data, this is going to be something like temperature or humidity, however for this exmaple we are just dealing with very basic pub/sub messages, so our data type is generic.</p>

<p><img alt="name feed" src="https://wott.io/assets/blog/feed-details-ea085f388451196a3884b7a0524e4c940bbf75874e5bdcee2de1327703adccc7.png" integrity="sha256-6ghfOIRRGWo4hLegUk5MlAu/dYdOW9zuLeEydwOtzMc=" crossorigin="anonymous" srcset="https://wott.io/assets/de0189-75d902806c794c016bc194ac901d940b994c63fafe21a203577b82a56bc083f1.png 2x, https://wott.io/assets/60856b-2fab37aa89b7e73140cded70ff34ff121e2bd513a9b9fd41fdaa7b6ba9359032.png 1x" /></p>

<p><strong>Note:</strong> it is possible to create the feeds using a simple python application. If you prefer a more codified style of set up, you can follow <a href="https://adafruit-io-python-client.readthedocs.io/en/latest/feeds.html">this</a> guide.</p>

<h2 id="creating-credentials-in-wott-dash">Creating credentials in WoTT dash</h2>

<p>In order to call the Adafruit API via HTTP access, it requires a key. You can find this key on the left-hand side of your Adafruit dasboard as you did with ‘Feeds’ under <code class="highlighter-rouge">AIO key</code>. You will be brought to a page akin to this:</p>

<p><img alt="AIO key" src="https://wott.io/assets/blog/aio-key-modal-f866f82bdffa097d3781bfcf79bf1f305b9d7854d84fcbd0c9321d6d29f0ef65.png" integrity="sha256-+Gb4K9/6CX03gb/Peb8fMFudeFTYT8vQyTIdbSnw72U=" crossorigin="anonymous" srcset="https://wott.io/assets/9d26f5-e2c043174e352a6c486fd026d20a0737aa421a05cfd1ad0c6adfb2700db0c8ac.png 2x, https://wott.io/assets/953c52-6568272b8d733ac8ac49f491a08b620bcb97ee442eb4c4a264d2fb02775b670e.png 1x" /></p>

<p>These are your unique Adafruit details. We can add these to WoTT’s dashboard as a new credential where the value is your personal username followed by the <code class="highlighter-rouge">Active Key</code> value. To do so, you will need to login or create an account for the <a href="https://dash.wott.io">WoTT dash</a>.</p>

<p><img alt="WoTT login" src="https://wott.io/assets/blog/wott-dash-212c3643e41361a1a771dc7435ae6b12c4f1afde0f8b56a437175997adf118e2.png" integrity="sha256-ISw2Q+QTYaGncdx0Na5rEsTxr94Pi1akNxdZl63xGOI=" crossorigin="anonymous" srcset="https://wott.io/assets/03bed4-94fc8f0b09ef29ac1061055fd7393dad9bf364a9f11fdd84a42ebbbe428d9dc3.png 2x, https://wott.io/assets/deedd0-84939d636b841f87b985a340275fd851b6377a892de7b755219a407f433522ac.png 1x" /></p>

<p>If you already have the WoTT dash and have registered your devices, you can skip ahead to inputting the credentials of the device. Otherwise, register your WoTT agent device to the dash by obtaining the Device ID and Claim Token by doing the following commands on said device:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ wott-agent whoami
$ wott-aget claim-token
</code></pre></div></div>

<p>and pasting the output into the ‘Claim Device’ segment of the WoTT dash. This device is now claimed and registered to the WoTT dash. You can view the list of your claimed devices on the main dashboard. Navigate to your newly registered device and add a new tag, <code class="highlighter-rouge">adafruit</code> to it. Through these tags, WoTT identifies which devices specific credentials are intended for.</p>

<p><img alt="Adafruit tags" src="https://wott.io/assets/blog/adafruit-tags-4c74ebb36ad6e163a778f7a8db3049666a631c012c7736a7bdeed264a3ce850b.png" integrity="sha256-THTrs2rW4WOnePeo2zBJZmpjHAEsdzanve7SZKPOhQs=" crossorigin="anonymous" srcset="https://wott.io/assets/378d39-e5a73a56f3e694bf2abbe1b5095cf44e0a23ea89ddd6b6ddfa94adb9454d6957.png 2x, https://wott.io/assets/7d7aaa-48c4273f1c6cb674c42715067887a9e25538d8460fc9087c0d5d8b4248dbc8b1.png 1x" /></p>

<p>Now that we are all set up, we need to create the credentials with the Adafruit information. Navigate to the ‘Credentials’ page of the WoTT dash and a new credential. Input the following into the fields:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Name = adafruit_aio
Key = credentials
Value = username:key
Tags = adafruit
</code></pre></div></div>

<p>using your relevant information from the Adafruit AIO key.
Note the <code class="highlighter-rouge">adafruit</code> tag here. Ensure that the device you will be downloading the credentials on has a matching tag.</p>

<p>To download the credential, restart the WoTT Agent by running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo service wott-agent restart
</code></pre></div></div>
<p>There will now be a JSON file on your system containing your credentials.</p>

<h2 id="setting-up-adafruit-feed-sharing-with-an-mqtt-client">Setting up Adafruit feed sharing with an MQTT Client</h2>

<p>We have included a modified example of the Adafruit feed sharing tutorial in this guide which utilises WoTT’s credentials rather than hard coding your details into the application. To run the example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir ~/wott-adafruit-mqtt-example
$ cd ~/wott-adafruit-mqtt-example
$ curl -o mqtt_shared_feeds.py https://raw.githubusercontent.com/WoTTsecurity/agent/master/docs/adafruit-io/mqtt_shared_feeds.py
$ sudo python3 mqtt_shared_feeds.py
</code></pre></div></div>
<p>If you are successful, you should receive a message like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Publishing a new message every 10 seconds (press Ctrl-C to quit)...
Publishing 96 to data feed
Connected to Adafruit IO!
Publishing 12 to data feed
Feed data feed received new value: 12
Publishing 52 to data feed
Feed data feed received new value: 52
[...]
</code></pre></div></div>
<p>On your Adafruit IO dash, you should see the data being received on your feed:</p>

<p><img alt="feed data" src="https://wott.io/assets/blog/adafruit-feed-88cdb8ceb9f8c0820123a6ad3b8bad5e382b73d05d35034e0ca678a2f273033e.png" integrity="sha256-iM24zrn4wIIBI6atO4utXjgrc9BdNQNODKZ4ovJzAz4=" crossorigin="anonymous" srcset="https://wott.io/assets/13d874-9b39d1f729042b961046e9785807cb83a7ac4bf3bbb5b127edda8d75673f5c00.png 2x, https://wott.io/assets/861588-6fdd9f5793b1462567a346c540a1f1197b76e454a0a4e3758f7792d18fb77c32.png 1x" /></p>

<p><strong>Note:</strong> your values will be different to this example as they are randomly generated, use the above as a reference point only.</p>

<h2 id="common-errors">Common errors</h2>

<p>Adafruit IO Python uses Python 3. If you have both a version of Python 2 and Python 3 on your machine, you will need to use the appropriate commands (for example pip vs pip3).</p>

<p><strong>No module named Adafruit_IO</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>File "/Users/user/dir/app_dir/mqtt_shared_feeds.py", line 10, in &lt;module&gt;
    from Adafruit_IO import  MQTTClient
ImportError: No module named Adafruit_IO
</code></pre></div></div>
<p>This happens when Adafruit IO is not installed correctly. The reccommended fix is to <a href="https://github.com/adafruit/Adafruit_IO_Python">manually install</a> Adafruit IO into the directory that you are working in (<code class="highlighter-rouge">wott-adafruit-mqtt-example</code>).</p>

<h2 id="closing-notes">Closing notes</h2>

<p>We have successfully used WoTT credentials to secure access to your Adafruit IO feed through an MQTT client!</p>

<p>The Python application contained in this example is a modified version of Adafruit IO’s own MQTT feed sharing example. Feel free to edit, play with, and modify the app as you choose. Note that if you make changes to feed names, feed owners, etc; you will have to change this within the app (or within WoTT credentials to be more secure).</p>

<p>Ensure that if you do add additional credentials to WoTT dashboard that you restart the WoTT agent to download the credentials immediately- otherwise WoTT will fetch the information every 15 minutes.</p>


</div>
<div class="related_articles">
<span class="t_i1">Related articles</span>
<div class="blog_posts"><div class="post_mini-blocks">

  <div class="post">
  <div class="post_img" style="background-image:url(https://wott.io/assets/images/blogcover/mini/Image_5.png);"></div>
  <div class="post_prewinfo">
  <span class="category_name">tutorials</span>
  <a class="title" href="https://wott.io/blog/tutorials/2019/06/27/adafruit-io">Using WoTT credentials to manage access to Adafruit IO feeds</a>
  <span class="author_time">By <a>Fiona McAllister</a> on June 27, 2019</span>
  <span class="description">
   Using Adafruit IO with WoTT Credentials Introduction Adafruit IO is a free cloud service interested in making IoT accessible to everyone through presenting data in a useful and user-friendly way. Services that they provide include linking your IoT devices to Twitter and weather services. You can also use Adafruit IO to monitor... </span>
  <a class="read_full" href="https://wott.io/blog/tutorials/2019/06/27/adafruit-io">Continue reading </a>
  </div>
  </div>



  <div class="post">
  <div class="post_img" style="background-image:url(https://wott.io/assets/images/blogcover/mini/Image_5.png);"></div>
  <div class="post_prewinfo">
  <span class="category_name">tutorials</span>
  <a class="title" href="https://wott.io/blog/tutorials/2019/06/25/screenly-ose">Using WoTT credentials to manage access to Screenly OSE</a>
  <span class="author_time">By <a>Fiona McAllister</a> on June 25, 2019</span>
  <span class="description">
   Using WoTT to secure access to Screenly Introduction Screenly is a service that provides digital signage and acts as an OS on the host device. Essentially it treats your host device as a streaming service that projects visual media (such as images and webpages) onto a monitor from multiple different sources. Think... </span>
  <a class="read_full" href="https://wott.io/blog/tutorials/2019/06/25/screenly-ose">Continue reading </a>
  </div>
  </div>



  <div class="post">
  <div class="post_img" style="background-image:url(https://wott.io/assets/images/blogcover/mini/2019-06-25-why-open-source-solutions-are-critical-for-iot.png);"></div>
  <div class="post_prewinfo">
  <span class="category_name">thoughts</span>
  <a class="title" href="https://wott.io/blog/thoughts/2019/06/25/why-open-source-solutions-are-critical-for-IoT">Why open source solutions are critical for IoT</a>
  <span class="author_time">By <a>Al Esmail</a> on June 25, 2019</span>
  <span class="description">
   TL;DR IoT needs one ring to rule them all and it’s not a platform. In my last post, I described the relevance of open source security. For very different reasons, I will argue here that the internet of things (and cyber-physical systems in general) are in desperate need of open source software... </span>
  <a class="read_full" href="https://wott.io/blog/thoughts/2019/06/25/why-open-source-solutions-are-critical-for-IoT">Continue reading </a>
  </div>
  </div>



</div>
</div>
</div>

</div>

	</div>
	<footer class="b_footer">
<div class="top">
<div class="logo_sn">
<a class="logo" href="https://wott.io/" title="Home page"></a>
<ul class="nw">
<li style="background-image:url(https://wott.io//assets/style/img/github.svg);"><a href="https://github.com/wottsecurity" title="" target="_blank"></a></li>
<li style="background-image:url(https://wott.io//assets/style/img/twitter.svg);"><a href="https://twitter.com/wottsecurity" title="" target="_blank"></a></li>
<li style="background-image:url(https://wott.io//assets/style/img/linkedin.svg);"><a href="https://www.linkedin.com/company/wottsecurity" title="" target="_blank"></a></li>
</ul>
</div>
<div class="menu products"><ul>
<li><a href="https://wott.io/product" title="">products</a></li>
</ul></div>
<div class="menu about_us"><ul>
<li><a href="https://wott.io/about" title="">about us</a></li>
<li><a href="https://wott.io/pricing" title="">pricing</a></li>
<li><a href="https://wott.io/documentation" title="">documentation</a></li>
<li><a href="https://wott.io/blog" title="">blog</a></li>
</ul></div>
<div class="menu news"><ul>
<li><a href="" title="">latest news</a></li>

 <li><a href="https://wott.io/blog/tutorials/2019/06/27/adafruit-io" title="Using WoTT credentials to manage access to Adafruit IO feeds">Using WoTT credentials to manage access to Adafruit IO feeds</a></li>

 <li><a href="https://wott.io/blog/tutorials/2019/06/25/screenly-ose" title="Using WoTT credentials to manage access to Screenly OSE">Using WoTT credentials to manage access to Screenly OSE</a></li>

 <li><a href="https://wott.io/blog/thoughts/2019/06/25/why-open-source-solutions-are-critical-for-IoT" title="Why open source solutions are critical for IoT">Why open source solutions are critical for IoT</a></li>

</ul></div>
</div>

<div class="bottom">
<ul>
<li>&copy; Web Of Secure Things Ltd. All rights reserved</li>
<li><a href="/tos" title="">Terms of Service</a></li>
<li><a href="/privacy-policy" title="">Privacy Policy</a></li>
</ul>
</div>
</footer>

    <script  src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-134852372-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


</body>
</html>
